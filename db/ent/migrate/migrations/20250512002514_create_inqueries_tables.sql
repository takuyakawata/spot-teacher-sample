-- Modify "education_categories" table
ALTER TABLE `education_categories` ADD COLUMN `lesson_schedule_education_categories` bigint NULL, ADD INDEX `education_categories_lesson_schedules_education_categories` (`lesson_schedule_education_categories`), ADD CONSTRAINT `education_categories_lesson_schedules_education_categories` FOREIGN KEY (`lesson_schedule_education_categories`) REFERENCES `lesson_schedules` (`id`) ON UPDATE NO ACTION ON DELETE SET NULL;
-- Modify "grades" table
ALTER TABLE `grades` ADD COLUMN `lesson_schedule_grades` bigint NULL, ADD INDEX `grades_lesson_schedules_grades` (`lesson_schedule_grades`), ADD CONSTRAINT `grades_lesson_schedules_grades` FOREIGN KEY (`lesson_schedule_grades`) REFERENCES `lesson_schedules` (`id`) ON UPDATE NO ACTION ON DELETE SET NULL;
-- Create "inquiries" table
CREATE TABLE `inquiries` (`id` bigint NOT NULL AUTO_INCREMENT, `category` enum('LESSON','RESERVATION','CANCELLATION','OTHER') NOT NULL DEFAULT "OTHER", `inquiry_detail` longtext NOT NULL, `deleted_at` timestamp NULL, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL, `lesson_schedule_id` bigint NOT NULL, `school_id` bigint NOT NULL, `user_id` bigint NOT NULL, PRIMARY KEY (`id`), INDEX `inquiry_category` (`category`), INDEX `inquiry_created_at` (`created_at`), INDEX `inquiry_lesson_schedule_id` (`lesson_schedule_id`), INDEX `inquiry_school_id` (`school_id`), INDEX `inquiry_user_id` (`user_id`), CONSTRAINT `inquiries_lesson_plans_lesson` FOREIGN KEY (`lesson_schedule_id`) REFERENCES `lesson_plans` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT `inquiries_schools_school` FOREIGN KEY (`school_id`) REFERENCES `schools` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT `inquiries_users_teacher` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Modify "subjects" table
ALTER TABLE `subjects` ADD COLUMN `lesson_schedule_subjects` bigint NULL, ADD INDEX `subjects_lesson_schedules_subjects` (`lesson_schedule_subjects`), ADD CONSTRAINT `subjects_lesson_schedules_subjects` FOREIGN KEY (`lesson_schedule_subjects`) REFERENCES `lesson_schedules` (`id`) ON UPDATE NO ACTION ON DELETE SET NULL;
